(()=>{"use strict";var t={78:(t,e,o)=>{t.exports=o.p+"5ca61e82c0584bdf361e.svg"},613:(t,e,o)=>{t.exports=o.p+"b102e0c138da3d1896f3.svg"},417:(t,e,o)=>{t.exports=o.p+"197ea0849751401ac26c.svg"},265:(t,e,o)=>{t.exports=o.p+"39615cbdd64fcf136338.svg"},358:(t,e,o)=>{t.exports=o.p+"3ae544c41122d8b588cf.svg"},239:(t,e,o)=>{t.exports=o.p+"7c1c84ecb7617dea83aa.svg"},625:(t,e,o)=>{t.exports=o.p+"931b67957a51309f028b.svg"}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,o),a.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{const t=document.getElementById("popUp");function e(e,o,n){if(t.classList.remove("dp-none"),t.querySelector("label").textContent=e,o?t.querySelector("input").classList.remove("dp-none"):t.querySelector("input").classList.add("dp-none"),n){if(t.querySelector("[data-err]")){const e=t.querySelector("[data-err]");t.querySelector("[data-form]").removeChild(e)}const e=document.createElement("p");e.textContent=n,e.dataset.err=!0,t.querySelector("[data-form]").insertBefore(e,t.querySelector("[data-buttons]"))}return 0}const n={use:"function",input:"string",set fn(t){this.use=t},set inputVal(t){this.input=t}};t.addEventListener("click",(e=>{if(t.querySelector("[data-err]")){const e=t.querySelector("[data-err]");t.querySelector("[data-form]").removeChild(e)}(e.target.matches("#popUp")||e.target.matches(".warning"))&&(e.preventDefault(),t.classList.add("dp-none"),t.querySelector("input").value=""),e.target.matches(".success")&&(e.preventDefault(),t.querySelector("input").classList.contains("dp-none")?(n.use(),t.classList.add("dp-none")):(n.inputVal=t.querySelector("input").value??!1,t.querySelector("input").value="",n.use(n.input),t.classList.add("dp-none")))}));var r=o(239),a=o(417),s=o(265),c=o(78),i=o(358);const l=document.getElementById("taskEditor"),d=document.getElementById("addTask-btn"),p=document.getElementById("updateTask-btn"),u=document.getElementById("filterContainer"),g=document.getElementById("listContainer"),m=document.getElementById("projectList-btn"),y=document.getElementById("deleteTask-btn"),h=(()=>{function t(){const t=l.querySelectorAll(".dropdown[data-color]"),e=l.querySelector("#priorityMenu > button").textContent;t.forEach((t=>{t.setAttribute("data-color",e)}))}return d.querySelector("img").src=s,m.querySelector("img").src=a,p.querySelector("img").src=c,y.querySelector("img").src=i,l.querySelector("#cancelEdit-btn > img").src=r,l.addEventListener("click",(e=>{l.querySelectorAll(".dropdown").forEach((t=>{t.classList.remove("active")})),e.target.matches("[data-dropdown-priority]")?e.target.closest("#priorityMenu").classList.toggle("active"):(e.target.matches("[data-priority-link]")&&(e.target.closest("#priorityMenu").querySelector("[data-dropdown-priority]").textContent=e.target.textContent,t()),e.target.matches("[data-dropdown-project]")?e.target.closest("#projectMenu").classList.toggle("active"):e.target.matches("[data-project-link]")&&(e.target.closest("#projectMenu").querySelector("[data-dropdown-project]").textContent=e.target.textContent))})),l.querySelector("#cancelEdit-btn").addEventListener("click",(()=>{m.classList.toggle("dp-none"),u.classList.toggle("dp-none"),g.classList.toggle("dp-none"),l.classList.toggle("dp-none"),d.classList.toggle("dp-none"),p.classList.toggle("dp-none"),y.classList.add("dp-none")})),l.querySelector("#markCompleted-btn").addEventListener("click",(t=>{t.target.classList.toggle("mark"),t.target.textContent=t.target.classList.contains("mark")?"Completed":"Mark Completed"})),{setTaskEditorPage:function(t){return d.classList.toggle("dp-none"),u.classList.toggle("dp-none"),g.classList.toggle("dp-none"),m.classList.toggle("dp-none"),"add"===t?y.classList.add("dp-none"):y.classList.toggle("dp-none"),p.classList.toggle("dp-none"),l.classList.toggle("dp-none"),0},getFormElement:function(){return{priorityEl:l.querySelector("[data-dropdown-priority]"),dueDateEl:l.querySelector("#dueDateInput"),projectEl:l.querySelector("[data-dropdown-project]"),titleEl:l.querySelector("#todoInput"),descriptionEl:l.querySelector("#descriptionInput"),completedEl:l.querySelector("#markCompleted-btn")}},colorBtns:t}})(),f=(()=>{const t={tasks:{init:{priority:"High",dueDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),project:"myProject",title:"Hello World 😁",description:"Click me to edit my content. Or, click the button on the bottom right corner",completed:!1},init2:{priority:"Medium",dueDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),project:"myProject",title:"Showing the appearance of completed tasks",description:"Using filters just below the page title for displaying only uncomplete tasks or searching for the tasks under some project",completed:!0},init3:{priority:"Low",dueDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),project:"myProject",title:"Creating projects!",description:"Try the button on the bottom left ↙",completed:!1}},projects:{myProject:0},preference:{projectFilter:"",displayFilter:"All"}};return{getTodolist:async function e(){try{const o=await JSON.parse(localStorage.getItem("todolist"));return await o||(localStorage.setItem("todolist",JSON.stringify(t)),e()),o}catch(t){throw new Error("todolist isn't exit")}}}})(),S=f,v=t=>{const e=new Date(t),[o,n,r]=[e.getMonth(),e.getDate(),e.getFullYear()];return`${r}-${o+1<10?"0".concat(o+1):o}-${n<10?"0".concat(n):n}`},E=(()=>{async function t(){try{const t=await async function(){const t=await S.getTodolist(),e=await t.preference.displayFilter;return u.querySelector("#displayFilter > button").textContent=e,e}();g.querySelectorAll(".task-container").forEach((e=>{e.classList.remove("dp-none"),("true"===e.getAttribute("data-status")?"Completed":"Uncompleted")!==t&&"All"!==t&&e.classList.add("dp-none")}))}catch(t){throw new Error(t)}}return u.querySelector("#projectFilterInput").addEventListener("input",(t=>function(t){const e=t.target.value.toUpperCase(),o=e.split("");g.querySelectorAll(".task-container").forEach((t=>{t.classList.remove("dp-none");const n=t.querySelector(".tag-container > .project").textContent.toUpperCase().split("");if(!e)return 1;for(let e=0;e<o.length;e+=1)if(n[e]!==o[e])return t.classList.add("dp-none"),1;return 0}))}(t))),u.addEventListener("click",(e=>{e.target.matches("[data-dropdown-display]")?e.target.closest("#displayFilter").classList.toggle("active"):(e.target.matches("[data-display-link]")&&(e.target.closest("#displayFilter").querySelector("[data-dropdown-display]").textContent=e.target.textContent,Promise.resolve(async function(){const t=await S.getTodolist(),e=await t;e.preference.displayFilter=u.querySelector("#displayFilter > button").textContent,localStorage.clear(),localStorage.setItem("todolist",JSON.stringify(e))}()).then((()=>{t()}))),u.querySelector(".dropdown").classList.remove("active"))})),{filterTasks:t,sortTasks:async function(){const t=g.querySelectorAll(".task-container"),e=[];Array.from(t).forEach((t=>{const o=t.getAttribute("data-name"),n=t.querySelector(".due-date").textContent,r=new Date(n).getTime(),a=t.querySelector(".priority").textContent,s=t.querySelector(".project").textContent,c="none"!==s?s.toUpperCase().split("").map((t=>-1*t.charCodeAt())):[-91],i=t.getAttribute("data-status"),l=[o,r,{none:0,Low:1,Medium:2,High:3}[a],c,"true"===i?-1:1];e.push(l)})),(await async function(t){const e=t;for(let t=0;t<e.length-1;t+=1)for(let o=0;o<e.length-1-t;o+=1){const t=Number.parseInt(e[o][1],16),n=Number.parseInt(e[o+1][1],16),r=t>n,a=t===n,s=e[o][2]<e[o+1][2],c=e[o][2]===e[o+1][2];let i=!1;const l=e[o][3],d=e[o+1][3],p=l.length<d.length?l.length:d.length,u=l.join()===d.join();for(let t=0;t<p;t+=1)l[t]<d[t]&&(i=!0);const g=e[o][4]<e[o+1][4],m=e[o][4]===e[o+1][4];let y=!1;if(a?c?u?m||(y=g):y=i:y=s:y=r,y){const t=e[o];e[o]=e[o+1],e[o+1]=t}}return e}(e)).forEach((t=>{const[e]=t,o=g.querySelector(`[data-name="${e}"]`),n=o;return g.removeChild(o),g.appendChild(n),0}))}}})(),L=E,w=(()=>{async function t(){const t=document.querySelector("#projectMenu > .dropdown-menu"),e=await S.getTodolist();for(;t.children[0];)t.removeChild(t.children[0]);Object.keys(e.projects).forEach((e=>{const o=document.createElement("p");o.classList.add("dropdown-link"),o.dataset.projectLink=e,o.textContent=e,t.appendChild(o)}))}async function o(o){const n=await S.getTodolist(),{projects:r}=await n;if(o in await r)return e("Create a project",!0,"the name has been used"),this;if(!1===o||!o.toString().trim())return e("Create a project",!0,"Please enter a name"),this;r[o]=0;const a=n;return a.projects=r,localStorage.clear(),localStorage.setItem("todolist",JSON.stringify(a)),t(),0}async function r(){const e=await S.getTodolist();try{const o=e.tasks;Object.entries(o).forEach((e=>{const[o,n]=e,r=document.createElement("div"),a=n.description.length>71?n.description.slice(0,71).concat("..."):n.description,s="none"===n.priority?"dp-none":"",c="none"===n.project?"dp-none":"";r.classList.add("task-container"),r.innerHTML=`\n          <div class="tag-container" data-color="${n.priority}">\n            <div class="priority ${s}">${n.priority}</div>\n            <div class="due-date">${n.dueDate}</div>\n            <div class="project ${c}">${n.project}</div>\n          </div>\n          <div class="info-container">\n            <div class="title">${n.title}</div>\n            <div class="description">${a}</div>\n          </div>\n        `,r.dataset.name=o,r.dataset.status=n.completed,r.addEventListener("click",(()=>{!function(e,o){h.setTaskEditorPage(),t();const{priorityEl:n,dueDateEl:r,projectEl:a,titleEl:s,descriptionEl:c,completedEl:i}=h.getFormElement(),{priority:l,dueDate:d,project:p,title:u,description:g,completed:m}=o;n.textContent=l,r.value=v(d),a.textContent=p,s.value=u,s.dataset.name=e,c.value=g,!0===m&&(i.textContent="Completed",i.classList.add("mark")),h.colorBtns()}(o,n)})),g.appendChild(r)})),L.filterTasks(),L.sortTasks()}catch(t){throw new Error(t)}}function a(){g.querySelectorAll(".task-container").forEach((t=>{g.removeChild(t)}))}function s(t){m.classList.toggle("dp-none"),u.classList.toggle("dp-none"),g.classList.toggle("dp-none"),l.classList.toggle("dp-none"),d.classList.toggle("dp-none"),p.classList.toggle("dp-none"),y.classList.add("dp-none"),a(),localStorage.removeItem("todolist"),localStorage.setItem("todolist",JSON.stringify(t)),r()}async function c(){const t=await S.getTodolist(),e=await t,o=l.querySelector("#todoInput").dataset.name;if(!(o in e.tasks))throw new Error("id missing, check delete");delete e.tasks[o],s(await e)}return document.querySelector("#projectMenu + button").addEventListener("click",(()=>{e("Create a project",!0),n.fn=o})),d.addEventListener("click",(()=>{h.setTaskEditorPage("add"),t();const{priorityEl:e,dueDateEl:o,projectEl:n,titleEl:r,descriptionEl:a,completedEl:s}=h.getFormElement();l.querySelector("#priorityMenu").setAttribute("data-color","default"),e.textContent="none",o.value=v(Date.now()),l.querySelector("#projectMenu").setAttribute("data-color","default"),n.textContent="none",r.value="",r.dataset.name="addNewTask",a.value="",s.classList.remove("mark")})),p.addEventListener("click",(()=>{new Promise(((t,e)=>{t(S.getTodolist()),e(new Error("something wrong when updating"))})).then((t=>{const e=t,o=l.querySelector("#todoInput").dataset.name,{priorityEl:n,dueDateEl:r,projectEl:a,titleEl:c,descriptionEl:i,completedEl:d}=h.getFormElement(),p={priority:n.textContent,dueDate:new Date(r.value).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),project:a.textContent,title:c.value,description:i.value,completed:d.classList.contains("mark")},u=function(t){let e=0;const o=Object.values(t).toString().split("").map((t=>t.charCodeAt(0)));for(let t=0;t<o.length;t+=1)e+=parseInt(o[t],16)*(t+1);return`id${e.toString()}`}(p);if(o in e.tasks)delete e.tasks[o],e.tasks[u]=p;else{if("addNewTask"!==o)throw new Error("the entry of the task doesn't exit");e.tasks[u]=p}s(e)}))})),y.addEventListener("click",(function(){e("Delete cannot undo",!1),n.fn=c})),{createTasks:r,clearList:a}})();var j=o(625),k=o(613);const C=(()=>{const t=document.getElementById("projectContainer"),o=document.getElementById("listContainer"),r=document.getElementById("projectAdd-btn");function a(){const t=document.getElementById("projectList");return t.children[0]&&(t.removeChild(t.children[0]),a()),0}async function s(){const o=await S.getTodolist(),r=await o.projects;let c=1;Object.entries(r).forEach((r=>{const[i]=r;let[,l]=r;Object.values(o.tasks).forEach((t=>{i===t.project&&(l+=1)}));const d=document.createElement("li");d.classList.add("project-item"),d.innerHTML=`\n            <p data-project>${c}. ${i.toString()}</p>\n            <div class="task-counter">\n              <span>${l}</span>\n              <div>task${l>1?"s":""} in the project</div>\n            </div>\n            <div class="delete-sign">\n              <img src="${j}" alt="delete">\n            </div>\n          `,c+=1,d.dataset.name=i,d.querySelector(".delete-sign").addEventListener("click",(()=>{e(`${l} task${l>1?"s":""} will be set to Project: none`,!1),n.fn=()=>{Promise.resolve(async function(t){const e=t.dataset.name,o=await JSON.parse(localStorage.getItem("todolist")),n=await o;return Object.values(n.tasks).forEach((t=>{t.project===e&&(t.project="none")})),delete n.projects[e],localStorage.clear(),localStorage.setItem("todolist",JSON.stringify(n)),0}(d)).then((()=>{a(),s(),w.clearList(),w.createTasks()}))}})),t.querySelector("ol").appendChild(d)}))}async function c(t){const o=await S.getTodolist(),{projects:n}=await o;if(t in await n)return e("Create a project",!0,"the name has been used"),this;if(!1===t||!t.toString().trim())return e("Create a project",!0,"Please enter a name"),this;n[t]=0;const r=o;return r.projects=n,localStorage.clear(),localStorage.setItem("todolist",JSON.stringify(r)),a(),s(),0}return r.querySelector("img").src=k,r.addEventListener("click",(()=>{e("Create a project",!0),n.fn=c})),m.addEventListener("click",(()=>{u.classList.toggle("dp-none"),o.classList.toggle("dp-none"),d.classList.toggle("dp-none"),t.classList.toggle("dp-none"),r.classList.toggle("dp-none"),a(),s()})),{createProjectList:s}})(),q=C;Promise.resolve(S.getTodolist()).then((()=>{w.createTasks(),q.createProjectList()})),document.addEventListener("DOMContentLoaded",(()=>{h.colorBtns()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U2dDLGlCQUFpQixvQkFBb0IsS0FDNUMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1BvcFVwLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvRmxpdGVyLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1Rhc2tNYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1Byb2plY3RNYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL0FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImNvbnN0IHBvcFVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3BVcFwiKTtcclxuXHJcbmZ1bmN0aW9uIHNob3dNc2dQb3BVcChtc2csIHVzZUlucHV0LCBlcnIpIHtcclxuICBwb3BVcC5jbGFzc0xpc3QucmVtb3ZlKFwiZHAtbm9uZVwiKTtcclxuICBwb3BVcC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIikudGV4dENvbnRlbnQgPSBtc2c7XHJcbiAgaWYgKHVzZUlucHV0KSB7XHJcbiAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuY2xhc3NMaXN0LnJlbW92ZShcImRwLW5vbmVcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5jbGFzc0xpc3QuYWRkKFwiZHAtbm9uZVwiKTtcclxuICB9XHJcbiAgaWYgKGVycikge1xyXG4gICAgaWYgKHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1lcnJdXCIpKSB7XHJcbiAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1lcnJdXCIpO1xyXG4gICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZm9ybV1cIikucmVtb3ZlQ2hpbGQoY2hpbGROb2RlKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhpbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIGhpbnQudGV4dENvbnRlbnQgPSBlcnI7XHJcbiAgICBoaW50LmRhdGFzZXQuZXJyID0gdHJ1ZTtcclxuICAgIHBvcFVwXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZm9ybV1cIilcclxuICAgICAgLmluc2VydEJlZm9yZShoaW50LCBwb3BVcC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtYnV0dG9uc11cIikpO1xyXG4gIH1cclxuICByZXR1cm4gMDtcclxufVxyXG5cclxuY29uc3QgZXZlbnQgPSB7XHJcbiAgdXNlOiBcImZ1bmN0aW9uXCIsXHJcbiAgaW5wdXQ6IFwic3RyaW5nXCIsXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgKi9cclxuICBzZXQgZm4oY2FsbGJhY2spIHtcclxuICAgIHRoaXMudXNlID0gY2FsbGJhY2s7XHJcbiAgfSxcclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXHJcbiAgICovXHJcbiAgc2V0IGlucHV0VmFsKHZhbCkge1xyXG4gICAgdGhpcy5pbnB1dCA9IHZhbDtcclxuICB9LFxyXG59O1xyXG5cclxucG9wVXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgaWYgKHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1lcnJdXCIpKSB7XHJcbiAgICBjb25zdCBjaGlsZE5vZGUgPSBwb3BVcC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZXJyXVwiKTtcclxuICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1mb3JtXVwiKS5yZW1vdmVDaGlsZChjaGlsZE5vZGUpO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcIiNwb3BVcFwiKSB8fCBlLnRhcmdldC5tYXRjaGVzKFwiLndhcm5pbmdcIikpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHBvcFVwLmNsYXNzTGlzdC5hZGQoXCJkcC1ub25lXCIpO1xyXG4gICAgcG9wVXAucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICB9XHJcbiAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCIuc3VjY2Vzc1wiKSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHBvcFVwLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5jbGFzc0xpc3QuY29udGFpbnMoXCJkcC1ub25lXCIpKSB7XHJcbiAgICAgIGV2ZW50LnVzZSgpO1xyXG4gICAgICBwb3BVcC5jbGFzc0xpc3QuYWRkKFwiZHAtbm9uZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGV2ZW50LmlucHV0VmFsID0gcG9wVXAucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLnZhbHVlID8/IGZhbHNlO1xyXG4gICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICBldmVudC51c2UoZXZlbnQuaW5wdXQpO1xyXG4gICAgICBwb3BVcC5jbGFzc0xpc3QuYWRkKFwiZHAtbm9uZVwiKTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IHsgc2hvd01zZ1BvcFVwLCBldmVudCB9O1xyXG4iLCJpbXBvcnQgXCIuL3N0eWxlcy9zdHlsZS5jc3NcIjtcclxuaW1wb3J0IFwiLi9zdHlsZXMvY29udGFpbmVyLmNzc1wiO1xyXG5pbXBvcnQgXCIuL3N0eWxlcy9idXR0b24uY3NzXCI7XHJcbmltcG9ydCBcIi4vc3R5bGVzL2Ryb3Bkb3duLmNzc1wiO1xyXG5cclxuaW1wb3J0IGJsdWVYU1ZHIGZyb20gXCIuL2ljb25zL3gtLWJsdWUuc3ZnXCI7XHJcbmltcG9ydCBsaXN0U1ZHIGZyb20gXCIuL2ljb25zL2xpc3Quc3ZnXCI7XHJcbmltcG9ydCBwbHVzU1ZHIGZyb20gXCIuL2ljb25zL3BsdXMuc3ZnXCI7XHJcbmltcG9ydCBjaGVja1NWRyBmcm9tIFwiLi9pY29ucy9jaGVjay1jaXJjbGUuc3ZnXCI7XHJcbmltcG9ydCB0cmFzaFNWRyBmcm9tIFwiLi9pY29ucy90cmFzaC0yLnN2Z1wiO1xyXG5cclxuY29uc3QgdGFza0VkaXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0VkaXRvclwiKTtcclxuY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkVGFzay1idG5cIik7XHJcbmNvbnN0IHVwZGF0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwZGF0ZVRhc2stYnRuXCIpO1xyXG5jb25zdCBmaWx0ZXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbHRlckNvbnRhaW5lclwiKTtcclxuY29uc3QgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdENvbnRhaW5lclwiKTtcclxuY29uc3QgcHJvamVjdExpc3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RMaXN0LWJ0blwiKTtcclxuY29uc3QgZGVsZXRlVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlVGFzay1idG5cIik7XHJcblxyXG5jb25zdCBVSSA9ICgoKSA9PiB7XHJcbiAgYWRkVGFza0J0bi5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpLnNyYyA9IHBsdXNTVkc7XHJcbiAgcHJvamVjdExpc3RCdG4ucXVlcnlTZWxlY3RvcihcImltZ1wiKS5zcmMgPSBsaXN0U1ZHO1xyXG4gIHVwZGF0ZVRhc2tCdG4ucXVlcnlTZWxlY3RvcihcImltZ1wiKS5zcmMgPSBjaGVja1NWRztcclxuICBkZWxldGVUYXNrQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIikuc3JjID0gdHJhc2hTVkc7XHJcbiAgdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbEVkaXQtYnRuID4gaW1nXCIpLnNyYyA9IGJsdWVYU1ZHO1xyXG5cclxuICBmdW5jdGlvbiBzZXRUYXNrRWRpdG9yUGFnZShtb2RlKSB7XHJcbiAgICAvLyBIaWRlIGhvbWVwYWdlXHJcbiAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgZmlsdGVyQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgbGlzdENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIHByb2plY3RMaXN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgLy8gU2hvdyB0YXNrIGVkaXRvciBwYWdlXHJcbiAgICBpZiAobW9kZSA9PT0gXCJhZGRcIikge1xyXG4gICAgICBkZWxldGVUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJkcC1ub25lXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGVsZXRlVGFza0J0bi5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVRhc2tCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICB0YXNrRWRpdG9yLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRGb3JtRWxlbWVudCgpIHtcclxuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0ge1xyXG4gICAgICBwcmlvcml0eUVsOiB0YXNrRWRpdG9yLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1kcm9wZG93bi1wcmlvcml0eV1cIiksXHJcbiAgICAgIGR1ZURhdGVFbDogdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yKFwiI2R1ZURhdGVJbnB1dFwiKSxcclxuICAgICAgcHJvamVjdEVsOiB0YXNrRWRpdG9yLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1kcm9wZG93bi1wcm9qZWN0XVwiKSxcclxuICAgICAgdGl0bGVFbDogdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yKFwiI3RvZG9JbnB1dFwiKSxcclxuICAgICAgZGVzY3JpcHRpb25FbDogdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uSW5wdXRcIiksXHJcbiAgICAgIGNvbXBsZXRlZEVsOiB0YXNrRWRpdG9yLnF1ZXJ5U2VsZWN0b3IoXCIjbWFya0NvbXBsZXRlZC1idG5cIiksXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29sb3JCdG5zKCkge1xyXG4gICAgY29uc3QgYnRuQ29udGFpbmVycyA9IHRhc2tFZGl0b3IucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wZG93bltkYXRhLWNvbG9yXVwiKTtcclxuICAgIGNvbnN0IGNvbG9yTmFtZSA9IHRhc2tFZGl0b3IucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjcHJpb3JpdHlNZW51ID4gYnV0dG9uXCJcclxuICAgICkudGV4dENvbnRlbnQ7XHJcbiAgICBidG5Db250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvclwiLCBjb2xvck5hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0YXNrRWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3Bkb3duXCIpLmZvckVhY2goKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcIltkYXRhLWRyb3Bkb3duLXByaW9yaXR5XVwiKSkge1xyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KFwiI3ByaW9yaXR5TWVudVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcIltkYXRhLXByaW9yaXR5LWxpbmtdXCIpKSB7XHJcbiAgICAgIGNvbnN0IHByaW9yaXR5QnRuID0gZS50YXJnZXRcclxuICAgICAgICAuY2xvc2VzdChcIiNwcmlvcml0eU1lbnVcIilcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIltkYXRhLWRyb3Bkb3duLXByaW9yaXR5XVwiKTtcclxuICAgICAgcHJpb3JpdHlCdG4udGV4dENvbnRlbnQgPSBlLnRhcmdldC50ZXh0Q29udGVudDtcclxuICAgICAgY29sb3JCdG5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJbZGF0YS1kcm9wZG93bi1wcm9qZWN0XVwiKSkge1xyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KFwiI3Byb2plY3RNZW51XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiW2RhdGEtcHJvamVjdC1saW5rXVwiKSkge1xyXG4gICAgICBlLnRhcmdldFxyXG4gICAgICAgIC5jbG9zZXN0KFwiI3Byb2plY3RNZW51XCIpXHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1kcm9wZG93bi1wcm9qZWN0XVwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgZS50YXJnZXQudGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHRhc2tFZGl0b3IucXVlcnlTZWxlY3RvcihcIiNjYW5jZWxFZGl0LWJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgLy8gU2hvdyBob21lcGFnZVxyXG4gICAgcHJvamVjdExpc3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICBmaWx0ZXJDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICBsaXN0Q29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgLy8gSGlkZSBidXR0b25zIGZvciB0YXNrIGVkaXRvclxyXG4gICAgdGFza0VkaXRvci5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICB1cGRhdGVUYXNrQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgZGVsZXRlVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwiZHAtbm9uZVwiKTtcclxuICB9KTtcclxuXHJcbiAgdGFza0VkaXRvclxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIjbWFya0NvbXBsZXRlZC1idG5cIilcclxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcIm1hcmtcIik7XHJcbiAgICAgIGUudGFyZ2V0LnRleHRDb250ZW50ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibWFya1wiKVxyXG4gICAgICAgID8gXCJDb21wbGV0ZWRcIlxyXG4gICAgICAgIDogXCJNYXJrIENvbXBsZXRlZFwiO1xyXG4gICAgfSk7XHJcbiAgcmV0dXJuIHsgc2V0VGFza0VkaXRvclBhZ2UsIGdldEZvcm1FbGVtZW50LCBjb2xvckJ0bnMgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVJO1xyXG5cclxuZXhwb3J0IHtcclxuICB0YXNrRWRpdG9yLFxyXG4gIGFkZFRhc2tCdG4sXHJcbiAgdXBkYXRlVGFza0J0bixcclxuICBmaWx0ZXJDb250YWluZXIsXHJcbiAgbGlzdENvbnRhaW5lcixcclxuICBwcm9qZWN0TGlzdEJ0bixcclxuICBkZWxldGVUYXNrQnRuLFxyXG59O1xyXG4iLCJjb25zdCBTdG9yYWdlID0gKCgpID0+IHtcclxuICAvLyBVc2luZyBpbiBjcmVhdGluZyB0YXNrcyBhdCBmaXJzdCB0aW1lIGVudGVyaW5nIHRoZSBhcHBcclxuICBjb25zdCBpbml0VGFzayA9IHtcclxuICAgIHByaW9yaXR5OiBcIkhpZ2hcIixcclxuICAgIGR1ZURhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xyXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcclxuICAgICAgbW9udGg6IFwic2hvcnRcIixcclxuICAgICAgZGF5OiBcIm51bWVyaWNcIixcclxuICAgIH0pLFxyXG4gICAgcHJvamVjdDogXCJteVByb2plY3RcIixcclxuICAgIHRpdGxlOiBcIkhlbGxvIFdvcmxkIPCfmIFcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIkNsaWNrIG1lIHRvIGVkaXQgbXkgY29udGVudC4gT3IsIGNsaWNrIHRoZSBidXR0b24gb24gdGhlIGJvdHRvbSByaWdodCBjb3JuZXJcIixcclxuICAgIGNvbXBsZXRlZDogZmFsc2UsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaW5pdFRhc2syID0ge1xyXG4gICAgcHJpb3JpdHk6IFwiTWVkaXVtXCIsXHJcbiAgICBkdWVEYXRlOiBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIsIHtcclxuICAgICAgeWVhcjogXCJudW1lcmljXCIsXHJcbiAgICAgIG1vbnRoOiBcInNob3J0XCIsXHJcbiAgICAgIGRheTogXCJudW1lcmljXCIsXHJcbiAgICB9KSxcclxuICAgIHByb2plY3Q6IFwibXlQcm9qZWN0XCIsXHJcbiAgICB0aXRsZTogXCJTaG93aW5nIHRoZSBhcHBlYXJhbmNlIG9mIGNvbXBsZXRlZCB0YXNrc1wiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiVXNpbmcgZmlsdGVycyBqdXN0IGJlbG93IHRoZSBwYWdlIHRpdGxlIGZvciBkaXNwbGF5aW5nIG9ubHkgdW5jb21wbGV0ZSB0YXNrcyBvciBzZWFyY2hpbmcgZm9yIHRoZSB0YXNrcyB1bmRlciBzb21lIHByb2plY3RcIixcclxuICAgIGNvbXBsZXRlZDogdHJ1ZSxcclxuICB9O1xyXG5cclxuICBjb25zdCBpbml0VGFzazMgPSB7XHJcbiAgICBwcmlvcml0eTogXCJMb3dcIixcclxuICAgIGR1ZURhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xyXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcclxuICAgICAgbW9udGg6IFwic2hvcnRcIixcclxuICAgICAgZGF5OiBcIm51bWVyaWNcIixcclxuICAgIH0pLFxyXG4gICAgcHJvamVjdDogXCJteVByb2plY3RcIixcclxuICAgIHRpdGxlOiBcIkNyZWF0aW5nIHByb2plY3RzIVwiLFxyXG4gICAgZGVzY3JpcHRpb246IFwiVHJ5IHRoZSBidXR0b24gb24gdGhlIGJvdHRvbSBsZWZ0IOKGmVwiLFxyXG4gICAgY29tcGxldGVkOiBmYWxzZSxcclxuICB9O1xyXG5cclxuICAvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIGFsbCB0YXNrc1xyXG4gIGNvbnN0IHRvZG9saXN0ID0ge1xyXG4gICAgdGFza3M6IHtcclxuICAgICAgaW5pdDogaW5pdFRhc2ssXHJcbiAgICAgIGluaXQyOiBpbml0VGFzazIsXHJcbiAgICAgIGluaXQzOiBpbml0VGFzazMsXHJcbiAgICB9LFxyXG4gICAgcHJvamVjdHM6IHtcclxuICAgICAgbXlQcm9qZWN0OiAwLFxyXG4gICAgfSxcclxuICAgIHByZWZlcmVuY2U6IHtcclxuICAgICAgcHJvamVjdEZpbHRlcjogXCJcIixcclxuICAgICAgZGlzcGxheUZpbHRlcjogXCJBbGxcIixcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gZ2V0VG9kb2xpc3QoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBsaXN0ID0gYXdhaXQgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9saXN0XCIpKTtcclxuICAgICAgaWYgKCEoYXdhaXQgbGlzdCkpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9saXN0XCIsIEpTT04uc3RyaW5naWZ5KHRvZG9saXN0KSk7XHJcbiAgICAgICAgZ2V0VG9kb2xpc3QoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbGlzdDtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0b2RvbGlzdCBpc24ndCBleGl0XCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4geyBnZXRUb2RvbGlzdCB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3RvcmFnZTtcclxuXHJcbi8vIFVzaW5nIGluIGNyZWF0aW5nIGEgbmV3IHRhc2tcclxuZnVuY3Rpb24gaGFzaCh0YXNrKSB7XHJcbiAgbGV0IGhhc2hWYWx1ZSA9IDA7XHJcbiAgY29uc3QgY29kZUFyciA9IE9iamVjdC52YWx1ZXModGFzaylcclxuICAgIC50b1N0cmluZygpXHJcbiAgICAuc3BsaXQoXCJcIilcclxuICAgIC5tYXAoKGMpID0+IGMuY2hhckNvZGVBdCgwKSk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlQXJyLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICBoYXNoVmFsdWUgKz0gcGFyc2VJbnQoY29kZUFycltpXSwgMTYpICogKGkgKyAxKTtcclxuICB9XHJcbiAgY29uc3QgaWRWYWx1ZSA9IGBpZCR7aGFzaFZhbHVlLnRvU3RyaW5nKCl9YDtcclxuICByZXR1cm4gaWRWYWx1ZTtcclxufVxyXG5cclxuY29uc3QgZGF0ZU1ha2VyID0gKGRhdGUpID0+IHtcclxuICBjb25zdCBmb3JtYXR0ZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgY29uc3QgW21vbnRoLCBkYXksIHllYXJdID0gW1xyXG4gICAgZm9ybWF0dGVkRGF0ZS5nZXRNb250aCgpLFxyXG4gICAgZm9ybWF0dGVkRGF0ZS5nZXREYXRlKCksXHJcbiAgICBmb3JtYXR0ZWREYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgXTtcclxuICBjb25zdCBpbnB1dFR5cGVEYXRlID0gYCR7eWVhcn0tJHtcclxuICAgIG1vbnRoICsgMSA8IDEwID8gXCIwXCIuY29uY2F0KG1vbnRoICsgMSkgOiBtb250aFxyXG4gIH0tJHtkYXkgPCAxMCA/IFwiMFwiLmNvbmNhdChkYXkpIDogZGF5fWA7XHJcbiAgcmV0dXJuIGlucHV0VHlwZURhdGU7XHJcbn07XHJcblxyXG5leHBvcnQgeyBoYXNoLCBkYXRlTWFrZXIgfTtcclxuIiwiaW1wb3J0IHsgZmlsdGVyQ29udGFpbmVyLCBsaXN0Q29udGFpbmVyIH0gZnJvbSBcIi4vVUlcIjtcclxuaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4vU3RvcmFnZVwiO1xyXG5cclxuY29uc3QgRmlsdGVyID0gKCgpID0+IHtcclxuICBmdW5jdGlvbiBmaWx0ZXJQcm9qZWN0KGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCk7XHJcbiAgICBjb25zdCBrZXl3b3JkcyA9IGlucHV0VmFsdWUuc3BsaXQoXCJcIik7XHJcbiAgICBsaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFzay1jb250YWluZXJcIikuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgICB0YXNrLmNsYXNzTGlzdC5yZW1vdmUoXCJkcC1ub25lXCIpO1xyXG4gICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHRhc2sucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi50YWctY29udGFpbmVyID4gLnByb2plY3RcIlxyXG4gICAgICApLnRleHRDb250ZW50O1xyXG4gICAgICBjb25zdCBjb21wYXJpc29uID0gcHJvamVjdE5hbWUudG9VcHBlckNhc2UoKS5zcGxpdChcIlwiKTtcclxuICAgICAgaWYgKCFpbnB1dFZhbHVlKSByZXR1cm4gMTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXl3b3Jkcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGlmIChjb21wYXJpc29uW2ldICE9PSBrZXl3b3Jkc1tpXSkge1xyXG4gICAgICAgICAgdGFzay5jbGFzc0xpc3QuYWRkKFwiZHAtbm9uZVwiKTtcclxuICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyU2V0dGluZygpIHtcclxuICAgIGNvbnN0IHRvZG9saXN0ID0gYXdhaXQgU3RvcmFnZS5nZXRUb2RvbGlzdCgpO1xyXG4gICAgY29uc3QgZmlsdGVyU2V0dGluZyA9IGF3YWl0IHRvZG9saXN0LnByZWZlcmVuY2UuZGlzcGxheUZpbHRlcjtcclxuICAgIGZpbHRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI2Rpc3BsYXlGaWx0ZXIgPiBidXR0b25cIikudGV4dENvbnRlbnQgPVxyXG4gICAgICBmaWx0ZXJTZXR0aW5nO1xyXG4gICAgcmV0dXJuIGZpbHRlclNldHRpbmc7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBzZXRGaWx0ZXIoKSB7XHJcbiAgICBjb25zdCB0b2RvbGlzdCA9IGF3YWl0IFN0b3JhZ2UuZ2V0VG9kb2xpc3QoKTtcclxuICAgIGNvbnN0IG5ld0xpc3QgPSBhd2FpdCB0b2RvbGlzdDtcclxuICAgIG5ld0xpc3QucHJlZmVyZW5jZS5kaXNwbGF5RmlsdGVyID0gZmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI2Rpc3BsYXlGaWx0ZXIgPiBidXR0b25cIlxyXG4gICAgKS50ZXh0Q29udGVudDtcclxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2RvbGlzdFwiLCBKU09OLnN0cmluZ2lmeShuZXdMaXN0KSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBmaWx0ZXJUYXNrcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gYXdhaXQgZ2V0RmlsdGVyU2V0dGluZygpO1xyXG4gICAgICBjb25zdCB0YXNrQ29udGFpbmVycyA9IGxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWNvbnRhaW5lclwiKTtcclxuICAgICAgdGFza0NvbnRhaW5lcnMuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgICAgIHRhc2suY2xhc3NMaXN0LnJlbW92ZShcImRwLW5vbmVcIik7XHJcbiAgICAgICAgY29uc3QgdGFza1N0YXR1cyA9XHJcbiAgICAgICAgICB0YXNrLmdldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIpID09PSBcInRydWVcIlxyXG4gICAgICAgICAgICA/IFwiQ29tcGxldGVkXCJcclxuICAgICAgICAgICAgOiBcIlVuY29tcGxldGVkXCI7XHJcbiAgICAgICAgaWYgKHRhc2tTdGF0dXMgIT09IGZpbHRlclZhbHVlICYmIGZpbHRlclZhbHVlICE9PSBcIkFsbFwiKSB7XHJcbiAgICAgICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJkcC1ub25lXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBidWJibGVTb3J0KGFycikge1xyXG4gICAgY29uc3Qgc29ydGVkQXJyID0gYXJyO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWRBcnIubGVuZ3RoIC0gMTsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc29ydGVkQXJyLmxlbmd0aCAtIDEgLSBpOyBqICs9IDEpIHtcclxuICAgICAgICAvLyBbaWQsIGRhdGUsIHByaW9yaXR5LCBuYW1lXVxyXG4gICAgICAgIC8vIGVhcmxpZXIgZGF0ZSBmcmlzdFxyXG4gICAgICAgIGNvbnN0IGRhdGUxID0gTnVtYmVyLnBhcnNlSW50KHNvcnRlZEFycltqXVsxXSwgMTYpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUyID0gTnVtYmVyLnBhcnNlSW50KHNvcnRlZEFycltqICsgMV1bMV0sIDE2KTtcclxuICAgICAgICBjb25zdCBsYXRlckRhdGUgPSBkYXRlMSA+IGRhdGUyO1xyXG4gICAgICAgIGNvbnN0IHNhbWVEYXRlID0gZGF0ZTEgPT09IGRhdGUyO1xyXG4gICAgICAgIC8vIHRoZW4gd2hpY2ggaGFzIGhpZ2hlciBwcmlvcml0eVxyXG4gICAgICAgIGNvbnN0IGhpZ2hlclByaW9yaXR5ID0gc29ydGVkQXJyW2pdWzJdIDwgc29ydGVkQXJyW2ogKyAxXVsyXTtcclxuICAgICAgICBjb25zdCBzYW1lUHJpb3JpdHkgPSBzb3J0ZWRBcnJbal1bMl0gPT09IHNvcnRlZEFycltqICsgMV1bMl07XHJcbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBieSB0aGUgb3JkZXIgb2YgQS1aXHJcbiAgICAgICAgbGV0IHByaW9yTmFtZUluZGV4ID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgbmFtZUFycjEgPSBzb3J0ZWRBcnJbal1bM107XHJcbiAgICAgICAgY29uc3QgbmFtZUFycjIgPSBzb3J0ZWRBcnJbaiArIDFdWzNdO1xyXG4gICAgICAgIGNvbnN0IGxldHRlckxlbmd0aCA9XHJcbiAgICAgICAgICBuYW1lQXJyMS5sZW5ndGggPCBuYW1lQXJyMi5sZW5ndGggPyBuYW1lQXJyMS5sZW5ndGggOiBuYW1lQXJyMi5sZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgc2FtZVN0cmluZyA9IG5hbWVBcnIxLmpvaW4oKSA9PT0gbmFtZUFycjIuam9pbigpO1xyXG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGV0dGVyTGVuZ3RoOyBrICs9IDEpIHtcclxuICAgICAgICAgIGlmIChuYW1lQXJyMVtrXSA8IG5hbWVBcnIyW2tdKSB7XHJcbiAgICAgICAgICAgIHByaW9yTmFtZUluZGV4ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZmluYWxseSwgYmFzZSBvbiB3aGV0aGVyIHRhc2tzIGFyZSBjb21wbGV0ZWRcclxuICAgICAgICBjb25zdCB1bmNvbXBsZXRlZCA9IHNvcnRlZEFycltqXVs0XSA8IHNvcnRlZEFycltqICsgMV1bNF07XHJcbiAgICAgICAgY29uc3Qgc2FtZVN0YXR1cyA9IHNvcnRlZEFycltqXVs0XSA9PT0gc29ydGVkQXJyW2ogKyAxXVs0XTtcclxuICAgICAgICAvLyBjb21wYXJpc29uXHJcbiAgICAgICAgbGV0IHNob3VsZFN3YXAgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXNhbWVEYXRlKSB7XHJcbiAgICAgICAgICBzaG91bGRTd2FwID0gbGF0ZXJEYXRlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXNhbWVQcmlvcml0eSkge1xyXG4gICAgICAgICAgc2hvdWxkU3dhcCA9IGhpZ2hlclByaW9yaXR5O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXNhbWVTdHJpbmcpIHtcclxuICAgICAgICAgIHNob3VsZFN3YXAgPSBwcmlvck5hbWVJbmRleDtcclxuICAgICAgICB9IGVsc2UgaWYgKCFzYW1lU3RhdHVzKSB7XHJcbiAgICAgICAgICBzaG91bGRTd2FwID0gdW5jb21wbGV0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG91bGRTd2FwKSB7XHJcbiAgICAgICAgICBjb25zdCB0ZW1wID0gc29ydGVkQXJyW2pdO1xyXG4gICAgICAgICAgc29ydGVkQXJyW2pdID0gc29ydGVkQXJyW2ogKyAxXTtcclxuICAgICAgICAgIHNvcnRlZEFycltqICsgMV0gPSB0ZW1wO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNvcnRlZEFycjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIHNvcnRUYXNrcygpIHtcclxuICAgIGNvbnN0IHRhc2tDb250YWluZXJzID0gbGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stY29udGFpbmVyXCIpO1xyXG4gICAgY29uc3QgdGFza0FyciA9IFtdO1xyXG4gICAgQXJyYXkuZnJvbSh0YXNrQ29udGFpbmVycykuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IHRhc2suZ2V0QXR0cmlidXRlKFwiZGF0YS1uYW1lXCIpO1xyXG4gICAgICAvLyBwMSBmYWN0b3IgaW4gY29tcGFyaXNvblxyXG4gICAgICBjb25zdCBkdWVEYXRlID0gdGFzay5xdWVyeVNlbGVjdG9yKFwiLmR1ZS1kYXRlXCIpLnRleHRDb250ZW50O1xyXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZHVlRGF0ZSk7XHJcbiAgICAgIGNvbnN0IG1zYyA9IGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAvLyBwMiBmYWN0b3IgaW4gY29tcGFyaXNvblxyXG4gICAgICBjb25zdCBwcmlvcml0eSA9IHRhc2sucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS50ZXh0Q29udGVudDtcclxuICAgICAgY29uc3QgcHJpb3JpdHlTY29yZSA9IHtcclxuICAgICAgICBub25lOiAwLFxyXG4gICAgICAgIExvdzogMSxcclxuICAgICAgICBNZWRpdW06IDIsXHJcbiAgICAgICAgSGlnaDogMyxcclxuICAgICAgfTtcclxuICAgICAgLy8gcDMgZmFjdG9yIGluIGNvbXBhcmlzb25cclxuICAgICAgY29uc3QgcHJvamVjdCA9IHRhc2sucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0XCIpLnRleHRDb250ZW50O1xyXG4gICAgICAvLyBzb3J0ZWQgaW4gb3JkZXIgZnJvbSBBLVpcclxuICAgICAgY29uc3QgcHJvamVjdENvZGVBcnIgPVxyXG4gICAgICAgIHByb2plY3QgIT09IFwibm9uZVwiXHJcbiAgICAgICAgICA/IHByb2plY3RcclxuICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgICAgIC5zcGxpdChcIlwiKVxyXG4gICAgICAgICAgICAgIC5tYXAoKHgpID0+IHguY2hhckNvZGVBdCgpICogLTEpXHJcbiAgICAgICAgICA6IFstOTFdO1xyXG4gICAgICAvLyBwNCBmYWN0b3IgaW4gY29tcGFyaXNvblxyXG4gICAgICBjb25zdCBzdGF0dXMgPSB0YXNrLmdldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIpO1xyXG4gICAgICBjb25zdCBzdGF0dXNTY29yZSA9IHN0YXR1cyA9PT0gXCJ0cnVlXCIgPyAtMSA6IDE7XHJcbiAgICAgIC8vIFVzaW5nIGluIGNvbXBhcmlzb25cclxuICAgICAgY29uc3QgZWwgPSBbXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgbXNjLFxyXG4gICAgICAgIHByaW9yaXR5U2NvcmVbcHJpb3JpdHldLFxyXG4gICAgICAgIHByb2plY3RDb2RlQXJyLFxyXG4gICAgICAgIHN0YXR1c1Njb3JlLFxyXG4gICAgICBdO1xyXG4gICAgICB0YXNrQXJyLnB1c2goZWwpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBzb3J0ZWRBcnIgPSBhd2FpdCBidWJibGVTb3J0KHRhc2tBcnIpO1xyXG4gICAgc29ydGVkQXJyLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgW2lkXSA9IGl0ZW07XHJcbiAgICAgIGNvbnN0IHRhc2tOb2RlID0gbGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1uYW1lPVwiJHtpZH1cIl1gKTtcclxuICAgICAgY29uc3QgY29weSA9IHRhc2tOb2RlO1xyXG4gICAgICBsaXN0Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRhc2tOb2RlKTtcclxuICAgICAgbGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChjb3B5KTtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZpbHRlckNvbnRhaW5lclxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdEZpbHRlcklucHV0XCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiBmaWx0ZXJQcm9qZWN0KGUpKTtcclxuXHJcbiAgZmlsdGVyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJbZGF0YS1kcm9wZG93bi1kaXNwbGF5XVwiKSkge1xyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KFwiI2Rpc3BsYXlGaWx0ZXJcIikuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJbZGF0YS1kaXNwbGF5LWxpbmtdXCIpKSB7XHJcbiAgICAgIGUudGFyZ2V0XHJcbiAgICAgICAgLmNsb3Nlc3QoXCIjZGlzcGxheUZpbHRlclwiKVxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZHJvcGRvd24tZGlzcGxheV1cIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgIGUudGFyZ2V0LnRleHRDb250ZW50O1xyXG4gICAgICBQcm9taXNlLnJlc29sdmUoc2V0RmlsdGVyKCkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGZpbHRlclRhc2tzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcGRvd25cIikuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICB9KTtcclxuICByZXR1cm4geyBmaWx0ZXJUYXNrcywgc29ydFRhc2tzIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWx0ZXI7XHJcbiIsImltcG9ydCB7IHNob3dNc2dQb3BVcCwgZXZlbnQgfSBmcm9tIFwiLi9Qb3BVcFwiO1xyXG5pbXBvcnQgVUksIHtcclxuICB0YXNrRWRpdG9yLFxyXG4gIGFkZFRhc2tCdG4sXHJcbiAgdXBkYXRlVGFza0J0bixcclxuICBmaWx0ZXJDb250YWluZXIsXHJcbiAgcHJvamVjdExpc3RCdG4sXHJcbiAgZGVsZXRlVGFza0J0bixcclxuICBsaXN0Q29udGFpbmVyLFxyXG59IGZyb20gXCIuL1VJXCI7XHJcbmltcG9ydCBTdG9yYWdlLCB7IGhhc2gsIGRhdGVNYWtlciB9IGZyb20gXCIuL1N0b3JhZ2VcIjtcclxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9GbGl0ZXJcIjtcclxuXHJcbmNvbnN0IFRhc2tNYW5hZ2VyID0gKCgpID0+IHtcclxuICBhc3luYyBmdW5jdGlvbiBzZXRQcm9qZWN0TGlzdCgpIHtcclxuICAgIGNvbnN0IHByb2plY3REb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjcHJvamVjdE1lbnUgPiAuZHJvcGRvd24tbWVudVwiXHJcbiAgICApO1xyXG4gICAgY29uc3QgdG9kb2xpc3QgPSBhd2FpdCBTdG9yYWdlLmdldFRvZG9saXN0KCk7XHJcbiAgICB3aGlsZSAocHJvamVjdERvcGRvd24uY2hpbGRyZW5bMF0pIHtcclxuICAgICAgcHJvamVjdERvcGRvd24ucmVtb3ZlQ2hpbGQocHJvamVjdERvcGRvd24uY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmtleXModG9kb2xpc3QucHJvamVjdHMpLmZvckVhY2goKHByb2plY3ROYW1lKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRyb3Bkb3duSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICBkcm9wZG93bkl0ZW0uY2xhc3NMaXN0LmFkZChcImRyb3Bkb3duLWxpbmtcIik7XHJcbiAgICAgIGRyb3Bkb3duSXRlbS5kYXRhc2V0LnByb2plY3RMaW5rID0gcHJvamVjdE5hbWU7XHJcbiAgICAgIGRyb3Bkb3duSXRlbS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xyXG4gICAgICBwcm9qZWN0RG9wZG93bi5hcHBlbmRDaGlsZChkcm9wZG93bkl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBhZGRQcm9qZWN0KG5hbWUpIHtcclxuICAgIGNvbnN0IHRvZG9saXN0ID0gYXdhaXQgU3RvcmFnZS5nZXRUb2RvbGlzdCgpO1xyXG4gICAgY29uc3QgeyBwcm9qZWN0cyB9ID0gYXdhaXQgdG9kb2xpc3Q7XHJcbiAgICBpZiAobmFtZSBpbiAoYXdhaXQgcHJvamVjdHMpKSB7XHJcbiAgICAgIHNob3dNc2dQb3BVcChcIkNyZWF0ZSBhIHByb2plY3RcIiwgdHJ1ZSwgXCJ0aGUgbmFtZSBoYXMgYmVlbiB1c2VkXCIpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGlmIChuYW1lID09PSBmYWxzZSB8fCAhbmFtZS50b1N0cmluZygpLnRyaW0oKSkge1xyXG4gICAgICBzaG93TXNnUG9wVXAoXCJDcmVhdGUgYSBwcm9qZWN0XCIsIHRydWUsIFwiUGxlYXNlIGVudGVyIGEgbmFtZVwiKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBwcm9qZWN0c1tuYW1lXSA9IDA7XHJcbiAgICBjb25zdCBuZXdMaXN0ID0gdG9kb2xpc3Q7XHJcbiAgICBuZXdMaXN0LnByb2plY3RzID0gcHJvamVjdHM7XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb2xpc3RcIiwgSlNPTi5zdHJpbmdpZnkobmV3TGlzdCkpO1xyXG4gICAgc2V0UHJvamVjdExpc3QoKTtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgLy8gQWN0aW9uIG9mIHRoZSBhZGQgcHJvamVjdCBidXR0b24gaW4gdGhlIHRhc2sgZWRpdG9yXHJcbiAgZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RNZW51ICsgYnV0dG9uXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgc2hvd01zZ1BvcFVwKFwiQ3JlYXRlIGEgcHJvamVjdFwiLCB0cnVlKTtcclxuICAgICAgLy8gc2V0dGVyXHJcbiAgICAgIGV2ZW50LmZuID0gYWRkUHJvamVjdDtcclxuICAgIH0pO1xyXG5cclxuICBmdW5jdGlvbiByZWFkVGFzayhpZCwgY29udGVudCkge1xyXG4gICAgVUkuc2V0VGFza0VkaXRvclBhZ2UoKTtcclxuICAgIHNldFByb2plY3RMaXN0KCk7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHByaW9yaXR5RWwsXHJcbiAgICAgIGR1ZURhdGVFbCxcclxuICAgICAgcHJvamVjdEVsLFxyXG4gICAgICB0aXRsZUVsLFxyXG4gICAgICBkZXNjcmlwdGlvbkVsLFxyXG4gICAgICBjb21wbGV0ZWRFbCxcclxuICAgIH0gPSBVSS5nZXRGb3JtRWxlbWVudCgpO1xyXG4gICAgY29uc3QgeyBwcmlvcml0eSwgZHVlRGF0ZSwgcHJvamVjdCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBjb21wbGV0ZWQgfSA9XHJcbiAgICAgIGNvbnRlbnQ7XHJcbiAgICAvLyBEaXNwbGF5IHRoZSBjb250ZW50IG9mIHRoZSB0YXNrXHJcbiAgICAvLyBwcmlvcml0eVxyXG4gICAgcHJpb3JpdHlFbC50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgLy8gZHVlRGF0ZVxyXG4gICAgZHVlRGF0ZUVsLnZhbHVlID0gZGF0ZU1ha2VyKGR1ZURhdGUpO1xyXG4gICAgLy8gcHJvamVjdFxyXG4gICAgcHJvamVjdEVsLnRleHRDb250ZW50ID0gcHJvamVjdDtcclxuICAgIC8vIHRpdGxlXHJcbiAgICB0aXRsZUVsLnZhbHVlID0gdGl0bGU7XHJcbiAgICB0aXRsZUVsLmRhdGFzZXQubmFtZSA9IGlkO1xyXG4gICAgLy8gZGVzY3JpcHRpb25cclxuICAgIGRlc2NyaXB0aW9uRWwudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuICAgIC8vIHN0YXR1c1xyXG4gICAgaWYgKGNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICBjb21wbGV0ZWRFbC50ZXh0Q29udGVudCA9IFwiQ29tcGxldGVkXCI7XHJcbiAgICAgIGNvbXBsZXRlZEVsLmNsYXNzTGlzdC5hZGQoXCJtYXJrXCIpO1xyXG4gICAgfVxyXG4gICAgVUkuY29sb3JCdG5zKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBjcmVhdGVUYXNrcygpIHtcclxuICAgIGNvbnN0IGl0ZW1zTGlzdCA9IGF3YWl0IFN0b3JhZ2UuZ2V0VG9kb2xpc3QoKTtcclxuICAgIC8vIGlmIChhd2FpdCBpdGVtc0xpc3QpXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0YXNrSXRlbXMgPSBpdGVtc0xpc3QudGFza3M7XHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRhc2tJdGVtcykuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IFtpZCwgY29udGVudF0gPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID1cclxuICAgICAgICAgIC8vIGZvbGQgZGVzY3JpcHRpb24gaWYgaXQncyB0b28gbG9uZ1xyXG4gICAgICAgICAgY29udGVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiA3MVxyXG4gICAgICAgICAgICA/IGNvbnRlbnQuZGVzY3JpcHRpb24uc2xpY2UoMCwgNzEpLmNvbmNhdChcIi4uLlwiKVxyXG4gICAgICAgICAgICA6IGNvbnRlbnQuZGVzY3JpcHRpb247XHJcbiAgICAgICAgY29uc3QgcHJpb3JpdHlJc05vbmUgPSBjb250ZW50LnByaW9yaXR5ID09PSBcIm5vbmVcIiA/IFwiZHAtbm9uZVwiIDogXCJcIjtcclxuICAgICAgICBjb25zdCBwcm9qZWN0SXNOb25lID0gY29udGVudC5wcm9qZWN0ID09PSBcIm5vbmVcIiA/IFwiZHAtbm9uZVwiIDogXCJcIjtcclxuICAgICAgICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbnRhaW5lclwiKTtcclxuICAgICAgICB0YXNrQ29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWctY29udGFpbmVyXCIgZGF0YS1jb2xvcj1cIiR7Y29udGVudC5wcmlvcml0eX1cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaW9yaXR5ICR7cHJpb3JpdHlJc05vbmV9XCI+JHtjb250ZW50LnByaW9yaXR5fTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVlLWRhdGVcIj4ke2NvbnRlbnQuZHVlRGF0ZX08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2plY3QgJHtwcm9qZWN0SXNOb25lfVwiPiR7Y29udGVudC5wcm9qZWN0fTwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+JHtjb250ZW50LnRpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4ke2Rlc2NyaXB0aW9ufTwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgICAgICB0YXNrQ29udGFpbmVyLmRhdGFzZXQubmFtZSA9IGlkO1xyXG4gICAgICAgIHRhc2tDb250YWluZXIuZGF0YXNldC5zdGF0dXMgPSBjb250ZW50LmNvbXBsZXRlZDtcclxuICAgICAgICB0YXNrQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICByZWFkVGFzayhpZCwgY29udGVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrQ29udGFpbmVyKTtcclxuICAgICAgfSk7XHJcbiAgICAgIEZpbHRlci5maWx0ZXJUYXNrcygpO1xyXG4gICAgICBGaWx0ZXIuc29ydFRhc2tzKCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGVhckxpc3QoKSB7XHJcbiAgICAvLyBSZW1vdmUgYWxsIHRoZSB0YXNrc1xyXG4gICAgbGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stY29udGFpbmVyXCIpLmZvckVhY2goKHRhc2spID0+IHtcclxuICAgICAgbGlzdENvbnRhaW5lci5yZW1vdmVDaGlsZCh0YXNrKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hvd0hvbWVQYWdlKG5ld0xpc3QpIHtcclxuICAgIC8vIFNob3cgaG9tZXBhZ2VcclxuICAgIHByb2plY3RMaXN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgZmlsdGVyQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgbGlzdENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIC8vIEhpZGUgYnV0dG9ucyBmb3IgdGFzayBlZGl0b3JcclxuICAgIHRhc2tFZGl0b3IuY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgdXBkYXRlVGFza0J0bi5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIGRlbGV0ZVRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImRwLW5vbmVcIik7XHJcbiAgICAvLyBSZW1vdmUgYWxsIHRoZSB0YXNrc1xyXG4gICAgY2xlYXJMaXN0KCk7XHJcbiAgICAvLyBSZWxvYWQgdGhlIHVwZGF0ZWQgaW5mbyB0byBsb2NhbFN0b3JhZ2VcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidG9kb2xpc3RcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9saXN0XCIsIEpTT04uc3RyaW5naWZ5KG5ld0xpc3QpKTtcclxuICAgIGNyZWF0ZVRhc2tzKCk7XHJcbiAgfVxyXG5cclxuICAvLyBmb3IgcHJlcGFyaW5nIGEgYmxhbmsgdGFzayBmb3JtIG9ubHlcclxuICBhZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBVSS5zZXRUYXNrRWRpdG9yUGFnZShcImFkZFwiKTtcclxuICAgIHNldFByb2plY3RMaXN0KCk7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHByaW9yaXR5RWwsXHJcbiAgICAgIGR1ZURhdGVFbCxcclxuICAgICAgcHJvamVjdEVsLFxyXG4gICAgICB0aXRsZUVsLFxyXG4gICAgICBkZXNjcmlwdGlvbkVsLFxyXG4gICAgICBjb21wbGV0ZWRFbCxcclxuICAgIH0gPSBVSS5nZXRGb3JtRWxlbWVudCgpO1xyXG4gICAgLy8gUHJpb3JpdHlcclxuICAgIHRhc2tFZGl0b3JcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlNZW51XCIpXHJcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIsIFwiZGVmYXVsdFwiKTtcclxuICAgIHByaW9yaXR5RWwudGV4dENvbnRlbnQgPSBcIm5vbmVcIjtcclxuICAgIC8vIGR1ZSBkYXRlXHJcbiAgICBkdWVEYXRlRWwudmFsdWUgPSBkYXRlTWFrZXIoRGF0ZS5ub3coKSk7XHJcbiAgICAvLyBwcm9qZWN0XHJcbiAgICB0YXNrRWRpdG9yXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RNZW51XCIpXHJcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIsIFwiZGVmYXVsdFwiKTtcclxuICAgIHByb2plY3RFbC50ZXh0Q29udGVudCA9IFwibm9uZVwiO1xyXG4gICAgLy8gdGl0bGVcclxuICAgIHRpdGxlRWwudmFsdWUgPSBcIlwiO1xyXG4gICAgLy8gVGFzayBJRFxyXG4gICAgdGl0bGVFbC5kYXRhc2V0Lm5hbWUgPSBcImFkZE5ld1Rhc2tcIjtcclxuICAgIC8vIGRlc2NyaXB0aW9uXHJcbiAgICBkZXNjcmlwdGlvbkVsLnZhbHVlID0gXCJcIjtcclxuICAgIC8vIHN0YXR1c1xyXG4gICAgY29tcGxldGVkRWwuY2xhc3NMaXN0LnJlbW92ZShcIm1hcmtcIik7XHJcbiAgfSk7XHJcblxyXG4gIHVwZGF0ZVRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IHRhc2tsaXN0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICByZXNvbHZlKFN0b3JhZ2UuZ2V0VG9kb2xpc3QoKSk7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJzb21ldGhpbmcgd3Jvbmcgd2hlbiB1cGRhdGluZ1wiKSk7XHJcbiAgICB9KTtcclxuICAgIHRhc2tsaXN0LnRoZW4oKGZ1bGxmaWxsZWQpID0+IHtcclxuICAgICAgY29uc3QgbmV3TGlzdCA9IGZ1bGxmaWxsZWQ7XHJcbiAgICAgIGNvbnN0IHRhc2tJZCA9IHRhc2tFZGl0b3IucXVlcnlTZWxlY3RvcihcIiN0b2RvSW5wdXRcIikuZGF0YXNldC5uYW1lO1xyXG4gICAgICBjb25zdCB7XHJcbiAgICAgICAgcHJpb3JpdHlFbCxcclxuICAgICAgICBkdWVEYXRlRWwsXHJcbiAgICAgICAgcHJvamVjdEVsLFxyXG4gICAgICAgIHRpdGxlRWwsXHJcbiAgICAgICAgZGVzY3JpcHRpb25FbCxcclxuICAgICAgICBjb21wbGV0ZWRFbCxcclxuICAgICAgfSA9IFVJLmdldEZvcm1FbGVtZW50KCk7XHJcbiAgICAgIGNvbnN0IGZvcm1Db250ZW50ID0ge1xyXG4gICAgICAgIHByaW9yaXR5OiBwcmlvcml0eUVsLnRleHRDb250ZW50LFxyXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKGR1ZURhdGVFbC52YWx1ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xyXG4gICAgICAgICAgeWVhcjogXCJudW1lcmljXCIsXHJcbiAgICAgICAgICBtb250aDogXCJzaG9ydFwiLFxyXG4gICAgICAgICAgZGF5OiBcIm51bWVyaWNcIixcclxuICAgICAgICB9KSxcclxuICAgICAgICBwcm9qZWN0OiBwcm9qZWN0RWwudGV4dENvbnRlbnQsXHJcbiAgICAgICAgdGl0bGU6IHRpdGxlRWwudmFsdWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uRWwudmFsdWUsXHJcbiAgICAgICAgY29tcGxldGVkOiBjb21wbGV0ZWRFbC5jbGFzc0xpc3QuY29udGFpbnMoXCJtYXJrXCIpLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBuZXdUYXNrSWQgPSBoYXNoKGZvcm1Db250ZW50KTtcclxuICAgICAgaWYgKHRhc2tJZCBpbiBuZXdMaXN0LnRhc2tzKSB7XHJcbiAgICAgICAgZGVsZXRlIG5ld0xpc3QudGFza3NbdGFza0lkXTtcclxuICAgICAgICBuZXdMaXN0LnRhc2tzW25ld1Rhc2tJZF0gPSBmb3JtQ29udGVudDtcclxuICAgICAgfSBlbHNlIGlmICh0YXNrSWQgPT09IFwiYWRkTmV3VGFza1wiKSB7XHJcbiAgICAgICAgLy8gZW50ZXIgd2l0aCBhZGQgbmV3IHRhc2sgYnV0dG9uXHJcbiAgICAgICAgbmV3TGlzdC50YXNrc1tuZXdUYXNrSWRdID0gZm9ybUNvbnRlbnQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhlIGVudHJ5IG9mIHRoZSB0YXNrIGRvZXNuJ3QgZXhpdFwiKTtcclxuICAgICAgfVxyXG4gICAgICBzaG93SG9tZVBhZ2UobmV3TGlzdCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVGFzaygpIHtcclxuICAgIGNvbnN0IHRhc2tMaXN0ID0gYXdhaXQgU3RvcmFnZS5nZXRUb2RvbGlzdCgpO1xyXG4gICAgY29uc3QgbmV3TGlzdCA9IGF3YWl0IHRhc2tMaXN0O1xyXG4gICAgY29uc3QgdGFza0lkID0gdGFza0VkaXRvci5xdWVyeVNlbGVjdG9yKFwiI3RvZG9JbnB1dFwiKS5kYXRhc2V0Lm5hbWU7XHJcbiAgICBpZiAodGFza0lkIGluIG5ld0xpc3QudGFza3MpIHtcclxuICAgICAgZGVsZXRlIG5ld0xpc3QudGFza3NbdGFza0lkXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlkIG1pc3NpbmcsIGNoZWNrIGRlbGV0ZVwiKTtcclxuICAgIH1cclxuICAgIHNob3dIb21lUGFnZShhd2FpdCBuZXdMaXN0KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRyaWdnZXJQb3BVcCgpIHtcclxuICAgIC8vIGluZm9Nc2csIHVzZUlucHV0PywgZXJyTXNnXHJcbiAgICBzaG93TXNnUG9wVXAoXCJEZWxldGUgY2Fubm90IHVuZG9cIiwgZmFsc2UpO1xyXG4gICAgZXZlbnQuZm4gPSBkZWxldGVUYXNrO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdHJpZ2dlclBvcFVwKTtcclxuXHJcbiAgcmV0dXJuIHsgY3JlYXRlVGFza3MsIGNsZWFyTGlzdCB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGFza01hbmFnZXI7XHJcbiIsImltcG9ydCBYU1ZHIGZyb20gXCIuL2ljb25zL3guc3ZnXCI7XHJcbmltcG9ydCBmb2xkZXJQbHVzU1ZHIGZyb20gXCIuL2ljb25zL2ZvbGRlci1wbHVzLnN2Z1wiO1xyXG5pbXBvcnQgeyBzaG93TXNnUG9wVXAsIGV2ZW50IH0gZnJvbSBcIi4vUG9wVXBcIjtcclxuaW1wb3J0IHsgYWRkVGFza0J0biwgZmlsdGVyQ29udGFpbmVyLCBwcm9qZWN0TGlzdEJ0biB9IGZyb20gXCIuL1VJXCI7XHJcbmltcG9ydCBTdG9yYWdlIGZyb20gXCIuL1N0b3JhZ2VcIjtcclxuaW1wb3J0IFRhc2tNYW5hZ2VyIGZyb20gXCIuL1Rhc2tNYW5hZ2VyXCI7XHJcblxyXG5jb25zdCBQcm9qZWN0TWFuYWdlciA9ICgoKSA9PiB7XHJcbiAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdENvbnRhaW5lclwiKTtcclxuICBjb25zdCBsaXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0Q29udGFpbmVyXCIpO1xyXG4gIGNvbnN0IHByb2plY3RBZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RBZGQtYnRuXCIpO1xyXG5cclxuICBwcm9qZWN0QWRkQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIikuc3JjID0gZm9sZGVyUGx1c1NWRztcclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdExpc3RJdGVtcygpIHtcclxuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0TGlzdFwiKTtcclxuICAgIGlmIChwcm9qZWN0TGlzdC5jaGlsZHJlblswXSkge1xyXG4gICAgICBwcm9qZWN0TGlzdC5yZW1vdmVDaGlsZChwcm9qZWN0TGlzdC5jaGlsZHJlblswXSk7XHJcbiAgICAgIHJlbW92ZVByb2plY3RMaXN0SXRlbXMoKTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0Tm9kZSkge1xyXG4gICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdE5vZGUuZGF0YXNldC5uYW1lO1xyXG4gICAgY29uc3QgdG9kb2xpc3QgPSBhd2FpdCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9kb2xpc3RcIikpO1xyXG4gICAgY29uc3QgbmV3TGlzdCA9IGF3YWl0IHRvZG9saXN0O1xyXG4gICAgT2JqZWN0LnZhbHVlcyhuZXdMaXN0LnRhc2tzKS5mb3JFYWNoKCh0YXNrKSA9PiB7XHJcbiAgICAgIGlmICh0YXNrLnByb2plY3QgPT09IHByb2plY3RJZCkge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgIHRhc2sucHJvamVjdCA9IFwibm9uZVwiO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGRlbGV0ZSBuZXdMaXN0LnByb2plY3RzW3Byb2plY3RJZF07XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb2xpc3RcIiwgSlNPTi5zdHJpbmdpZnkobmV3TGlzdCkpO1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0TGlzdCgpIHtcclxuICAgIGNvbnN0IHRvZG9saXN0ID0gYXdhaXQgU3RvcmFnZS5nZXRUb2RvbGlzdCgpO1xyXG4gICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCB0b2RvbGlzdC5wcm9qZWN0cztcclxuICAgIGxldCBjb3VudGVyID0gMTtcclxuICAgIE9iamVjdC5lbnRyaWVzKHByb2plY3RzKS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IFtuYW1lXSA9IHByb2plY3Q7XHJcbiAgICAgIGxldCBbLCBjb3VudF0gPSBwcm9qZWN0O1xyXG4gICAgICBPYmplY3QudmFsdWVzKHRvZG9saXN0LnRhc2tzKS5mb3JFYWNoKCh0YXNrKSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09IHRhc2sucHJvamVjdCkge1xyXG4gICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtbmFtZT0ke2lkfV1gKSkgcmV0dXJuO1xyXG4gICAgICAvLyBJZiB0aGUgaXRlbSBleGlzdHMsIHBhc3MgdGhpcyByb3VuZFxyXG4gICAgICBjb25zdCBwcm9qZWN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgcHJvamVjdEl0ZW0uY2xhc3NMaXN0LmFkZChcInByb2plY3QtaXRlbVwiKTtcclxuXHJcbiAgICAgIHByb2plY3RJdGVtLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHAgZGF0YS1wcm9qZWN0PiR7Y291bnRlcn0uICR7bmFtZS50b1N0cmluZygpfTwvcD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stY291bnRlclwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuPiR7Y291bnR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxkaXY+dGFzayR7Y291bnQgPiAxID8gXCJzXCIgOiBcIlwifSBpbiB0aGUgcHJvamVjdDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlbGV0ZS1zaWduXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9XCIke1hTVkd9XCIgYWx0PVwiZGVsZXRlXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgYDtcclxuICAgICAgY291bnRlciArPSAxO1xyXG4gICAgICBwcm9qZWN0SXRlbS5kYXRhc2V0Lm5hbWUgPSBuYW1lO1xyXG4gICAgICBwcm9qZWN0SXRlbVxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1zaWduXCIpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICBzaG93TXNnUG9wVXAoXHJcbiAgICAgICAgICAgIGAke2NvdW50fSB0YXNrJHtjb3VudCA+IDEgPyBcInNcIiA6IFwiXCJ9IHdpbGwgYmUgc2V0IHRvIFByb2plY3Q6IG5vbmVgLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGV2ZW50LmZuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoZGVsZXRlUHJvamVjdChwcm9qZWN0SXRlbSkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJlbW92ZVByb2plY3RMaXN0SXRlbXMoKTtcclxuICAgICAgICAgICAgICBjcmVhdGVQcm9qZWN0TGlzdCgpO1xyXG4gICAgICAgICAgICAgIFRhc2tNYW5hZ2VyLmNsZWFyTGlzdCgpO1xyXG4gICAgICAgICAgICAgIFRhc2tNYW5hZ2VyLmNyZWF0ZVRhc2tzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgcHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwib2xcIikuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBhZGRQcm9qZWN0KG5hbWUpIHtcclxuICAgIGNvbnN0IHRvZG9saXN0ID0gYXdhaXQgU3RvcmFnZS5nZXRUb2RvbGlzdCgpO1xyXG4gICAgY29uc3QgeyBwcm9qZWN0cyB9ID0gYXdhaXQgdG9kb2xpc3Q7XHJcbiAgICBpZiAobmFtZSBpbiAoYXdhaXQgcHJvamVjdHMpKSB7XHJcbiAgICAgIHNob3dNc2dQb3BVcChcIkNyZWF0ZSBhIHByb2plY3RcIiwgdHJ1ZSwgXCJ0aGUgbmFtZSBoYXMgYmVlbiB1c2VkXCIpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGlmIChuYW1lID09PSBmYWxzZSB8fCAhbmFtZS50b1N0cmluZygpLnRyaW0oKSkge1xyXG4gICAgICBzaG93TXNnUG9wVXAoXCJDcmVhdGUgYSBwcm9qZWN0XCIsIHRydWUsIFwiUGxlYXNlIGVudGVyIGEgbmFtZVwiKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBwcm9qZWN0c1tuYW1lXSA9IDA7XHJcbiAgICBjb25zdCBuZXdMaXN0ID0gdG9kb2xpc3Q7XHJcbiAgICBuZXdMaXN0LnByb2plY3RzID0gcHJvamVjdHM7XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb2xpc3RcIiwgSlNPTi5zdHJpbmdpZnkobmV3TGlzdCkpO1xyXG4gICAgcmVtb3ZlUHJvamVjdExpc3RJdGVtcygpO1xyXG4gICAgY3JlYXRlUHJvamVjdExpc3QoKTtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgcHJvamVjdEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgc2hvd01zZ1BvcFVwKFwiQ3JlYXRlIGEgcHJvamVjdFwiLCB0cnVlKTtcclxuICAgIC8vIHNldHRlclxyXG4gICAgZXZlbnQuZm4gPSBhZGRQcm9qZWN0O1xyXG4gIH0pO1xyXG5cclxuICBwcm9qZWN0TGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgLy8gSGlkZSBob21lcGFnZVxyXG4gICAgZmlsdGVyQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJkcC1ub25lXCIpO1xyXG4gICAgbGlzdENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICAvLyBTaG93IHByb2plY3QgbGlzdFxyXG4gICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiZHAtbm9uZVwiKTtcclxuICAgIHByb2plY3RBZGRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImRwLW5vbmVcIik7XHJcbiAgICAvLyBDbGVhciBwcm9qZWN0IGxpc3QsIGFuZCByZWNyZWF0ZSBpdFxyXG4gICAgcmVtb3ZlUHJvamVjdExpc3RJdGVtcygpO1xyXG4gICAgY3JlYXRlUHJvamVjdExpc3QoKTtcclxuICB9KTtcclxuICByZXR1cm4geyBjcmVhdGVQcm9qZWN0TGlzdCB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdE1hbmFnZXI7XHJcbiIsImltcG9ydCBUYXNrTWFuYWdlciBmcm9tIFwiLi9UYXNrTWFuYWdlclwiO1xyXG5pbXBvcnQgUHJvamVjdE1hbmFnZXIgZnJvbSBcIi4vUHJvamVjdE1hbmFnZXJcIjtcclxuaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4vU3RvcmFnZVwiO1xyXG5pbXBvcnQgVUkgZnJvbSBcIi4vVUlcIjtcclxuXHJcblByb21pc2UucmVzb2x2ZShTdG9yYWdlLmdldFRvZG9saXN0KCkpLnRoZW4oKCkgPT4ge1xyXG4gIFRhc2tNYW5hZ2VyLmNyZWF0ZVRhc2tzKCk7XHJcbiAgUHJvamVjdE1hbmFnZXIuY3JlYXRlUHJvamVjdExpc3QoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgVUkuY29sb3JCdG5zKCk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwicG9wVXAiLCJnZXRFbGVtZW50QnlJZCIsInNob3dNc2dQb3BVcCIsIm1zZyIsInVzZUlucHV0IiwiZXJyIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiYWRkIiwiY2hpbGROb2RlIiwicmVtb3ZlQ2hpbGQiLCJoaW50IiwiY3JlYXRlRWxlbWVudCIsImRhdGFzZXQiLCJpbnNlcnRCZWZvcmUiLCJ1c2UiLCJpbnB1dCIsImZuIiwiY2FsbGJhY2siLCJpbnB1dFZhbCIsInZhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJtYXRjaGVzIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImNvbnRhaW5zIiwidGFza0VkaXRvciIsImFkZFRhc2tCdG4iLCJ1cGRhdGVUYXNrQnRuIiwiZmlsdGVyQ29udGFpbmVyIiwibGlzdENvbnRhaW5lciIsInByb2plY3RMaXN0QnRuIiwiZGVsZXRlVGFza0J0biIsImNvbG9yQnRucyIsImJ0bkNvbnRhaW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3JOYW1lIiwiZm9yRWFjaCIsImNvbnRhaW5lciIsInNldEF0dHJpYnV0ZSIsInBsdXMiLCJsaXN0IiwiZHJvcGRvd24iLCJjbG9zZXN0IiwidG9nZ2xlIiwic2V0VGFza0VkaXRvclBhZ2UiLCJtb2RlIiwiZ2V0Rm9ybUVsZW1lbnQiLCJwcmlvcml0eUVsIiwiZHVlRGF0ZUVsIiwicHJvamVjdEVsIiwidGl0bGVFbCIsImRlc2NyaXB0aW9uRWwiLCJjb21wbGV0ZWRFbCIsIlN0b3JhZ2UiLCJ0b2RvbGlzdCIsInRhc2tzIiwiaW5pdCIsInByaW9yaXR5IiwiZHVlRGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJwcm9qZWN0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNvbXBsZXRlZCIsImluaXQyIiwiaW5pdDMiLCJwcm9qZWN0cyIsIm15UHJvamVjdCIsInByZWZlcmVuY2UiLCJwcm9qZWN0RmlsdGVyIiwiZGlzcGxheUZpbHRlciIsImdldFRvZG9saXN0IiwiYXN5bmMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRhdGVNYWtlciIsImRhdGUiLCJmb3JtYXR0ZWREYXRlIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJjb25jYXQiLCJGaWx0ZXIiLCJmaWx0ZXJUYXNrcyIsImZpbHRlclZhbHVlIiwiZmlsdGVyU2V0dGluZyIsImdldEZpbHRlclNldHRpbmciLCJ0YXNrIiwiZ2V0QXR0cmlidXRlIiwiZXZlbnQiLCJpbnB1dFZhbHVlIiwidG9VcHBlckNhc2UiLCJrZXl3b3JkcyIsInNwbGl0IiwiY29tcGFyaXNvbiIsImkiLCJmaWx0ZXJQcm9qZWN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJuZXdMaXN0IiwiY2xlYXIiLCJzZXRGaWx0ZXIiLCJ0aGVuIiwic29ydFRhc2tzIiwidGFza0NvbnRhaW5lcnMiLCJ0YXNrQXJyIiwiQXJyYXkiLCJmcm9tIiwiaWQiLCJtc2MiLCJnZXRUaW1lIiwicHJvamVjdENvZGVBcnIiLCJtYXAiLCJ4IiwiY2hhckNvZGVBdCIsInN0YXR1cyIsImVsIiwibm9uZSIsIkxvdyIsIk1lZGl1bSIsIkhpZ2giLCJwdXNoIiwiYXJyIiwic29ydGVkQXJyIiwiaiIsImRhdGUxIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJkYXRlMiIsImxhdGVyRGF0ZSIsInNhbWVEYXRlIiwiaGlnaGVyUHJpb3JpdHkiLCJzYW1lUHJpb3JpdHkiLCJwcmlvck5hbWVJbmRleCIsIm5hbWVBcnIxIiwibmFtZUFycjIiLCJsZXR0ZXJMZW5ndGgiLCJzYW1lU3RyaW5nIiwiam9pbiIsImsiLCJ1bmNvbXBsZXRlZCIsInNhbWVTdGF0dXMiLCJzaG91bGRTd2FwIiwidGVtcCIsImJ1YmJsZVNvcnQiLCJpdGVtIiwidGFza05vZGUiLCJjb3B5IiwiYXBwZW5kQ2hpbGQiLCJzZXRQcm9qZWN0TGlzdCIsInByb2plY3REb3Bkb3duIiwiY2hpbGRyZW4iLCJPYmplY3QiLCJrZXlzIiwicHJvamVjdE5hbWUiLCJkcm9wZG93bkl0ZW0iLCJwcm9qZWN0TGluayIsImFkZFByb2plY3QiLCJuYW1lIiwidG9TdHJpbmciLCJ0cmltIiwiY3JlYXRlVGFza3MiLCJpdGVtc0xpc3QiLCJ0YXNrSXRlbXMiLCJlbnRyaWVzIiwiY29udGVudCIsInRhc2tDb250YWluZXIiLCJzbGljZSIsInByaW9yaXR5SXNOb25lIiwicHJvamVjdElzTm9uZSIsImlubmVySFRNTCIsInJlYWRUYXNrIiwiY2xlYXJMaXN0Iiwic2hvd0hvbWVQYWdlIiwicmVtb3ZlSXRlbSIsImRlbGV0ZVRhc2siLCJ0YXNrTGlzdCIsInRhc2tJZCIsIm5vdyIsInJlamVjdCIsImZ1bGxmaWxsZWQiLCJmb3JtQ29udGVudCIsIm5ld1Rhc2tJZCIsImhhc2hWYWx1ZSIsImNvZGVBcnIiLCJ2YWx1ZXMiLCJjIiwiaGFzaCIsIlByb2plY3RNYW5hZ2VyIiwicHJvamVjdENvbnRhaW5lciIsInByb2plY3RBZGRCdG4iLCJyZW1vdmVQcm9qZWN0TGlzdEl0ZW1zIiwicHJvamVjdExpc3QiLCJjcmVhdGVQcm9qZWN0TGlzdCIsImNvdW50ZXIiLCJjb3VudCIsInByb2plY3RJdGVtIiwicHJvamVjdE5vZGUiLCJwcm9qZWN0SWQiLCJkZWxldGVQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==